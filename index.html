<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Bitcoin++</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="popup-container hide">
        <div id="confirmation" class="popup">
            <p></p>
            <div>
                <button class="hover" onclick="hidePopup(this)">Cancel</button>
                <button class="hover">Ok</button>
            </div>
        </div>
    </div>
    <div id="show_message" class="hide">
        <span>Message</span>
        <button id="hide_banner_btn">
        <svg viewBox="0 0 50.71 50.71">
            <title>Close this notification</title>
            <line x1="50.35" y1="0.35" x2="0.36" y2="50.35"/>
            <line x1="0.35" y1="0.35" x2="50.35" y2="50.35"/>
        </svg>
        </button>
    </div>
    <svg id="background" viewBox="0 0 2064.612 1967.514">
        <defs>
          <filter id="Rectangle_12" x="0" y="0" width="1502.184" height="1449.184" filterUnits="userSpaceOnUse">
            <feComposite in="SourceGraphic"/>
          </filter>
        </defs>
        <rect id="Rectangle_4" data-name="Rectangle 4" width="1387" height="637" rx="60" transform="translate(71 1517.087) rotate(-45)" fill="#17bf65"/>
        <g transform="matrix(1, 0, 0, 1, 0, 0)" filter="url(#Rectangle_12)">
          <rect id="Rectangle_12-2" data-name="Rectangle 12" width="1387" height="637" rx="60" transform="translate(521.43 6) rotate(45)" fill="#6decb9"/>
        </g>
        <circle id="Ellipse_3" data-name="Ellipse 3" cx="34.5" cy="34.5" r="34.5" transform="translate(1502.612 769.248)" fill="#b2ffe8"/>
        <circle id="Ellipse_2" data-name="Ellipse 2" cx="98" cy="98" r="98" transform="translate(1868.612 1036.248)" fill="#b2b2ff"/>
      </svg>
      
    <header id="main_header">
        <small class="dark-text">RanchiMall</small> <br><h3 class="dark-text">Local Bitcoin++</h3>
    </header>
    <main>
        <div id="left" class="bottom-margin grid">
            <div id="exchange" class="card">
                <ul id="switcher_header" class="grid">
                    <li onclick="showSection(this, 'asset_section')" class="exchange-btn" title="Buy or sell crypto assets">Trade</li>
                    <li onclick="showSection(this, 'crypto_section')" class="exchange-btn" title="Deposit or withdraw crypto assets">Crypto</li>
                    <li onclick="showSection(this, 'cash_section')" class=" active exchange-btn" title="Deposit or withdraw cash">Cash</li>
                </ul>
                <div id="switcher_body">
                    <div id="asset_section" class="exchange-section grid hide-completely">
                    </div>
                    <div id="crypto_section" class="exchange-section grid hide-completely">
                        <span id="send_crypto_btn" class="exchange-option">
                            <svg viewBox="0 0 73 73">
                                <line x1="22.13" y1="50.87" x2="50.48" y2="22.52"/>
                                <polyline points="30.71,22.24 50.76,22.24 50.76,42.29 "/>
                                <rect x="0.5" y="0.5" transform="matrix(6.123234e-17 -1 1 6.123234e-17 0 73)" class="st1" width="72" height="72"/>
                            </svg>                                                 
                            <h5>Send</h5>
                        </span>
                        <span id="deposit_crypto_btn" class="exchange-option">
                            <svg viewBox="0 0 73 73">
                                <line x1="33.78" y1="22.72" x2="33.78" y2="62.81"/>
                                <polyline class="st0" points="47.96,49.03 33.78,63.2 19.61,49.03 "/>
                                <line x1="47.15" y1="23.09" x2="47.15" y2="9.73"/>
                                <line x1="40.47" y1="16.41" x2="53.83" y2="16.41"/>
                                <rect x="0.5" y="0.5" transform="matrix(6.123234e-17 -1 1 6.123234e-17 0 73)" class="st1" width="72" height="72"/>
                            </svg>                       
                            <h5>Deposit</h5>
                        </span>
                        <span id="withdraw_crypto_btn" class="exchange-option">
                            <svg viewBox="0 0 73 73">
                                <line x1="33.78" y1="63.73" x2="33.78" y2="23.63"/>
                                <polyline points="19.61,37.42 33.78,23.24 47.96,37.42 "/>
                                <line x1="40.47" y1="16.41" x2="53.83" y2="16.41"/>
                                <rect x="0.5" y="0.5" transform="matrix(6.123234e-17 -1 1 6.123234e-17 0 73)" class="st1" width="72" height="72"/>
                            </svg>
                            <h5>Withdraw</h5>
                        </span>
                    </div>
                    <div id="cash_section" class="exchange-section grid">
                        <span id="deposit_cash_btn" class="exchange-option">
                            <svg viewBox="0 0 73 73">
                                <line x1="33.78" y1="22.72" x2="33.78" y2="62.81"/>
                                <polyline class="st0" points="47.96,49.03 33.78,63.2 19.61,49.03 "/>
                                <line x1="47.15" y1="23.09" x2="47.15" y2="9.73"/>
                                <line x1="40.47" y1="16.41" x2="53.83" y2="16.41"/>
                                <rect x="0.5" y="0.5" transform="matrix(6.123234e-17 -1 1 6.123234e-17 0 73)" class="st1" width="72" height="72"/>
                            </svg>                               
                            <h5>Deposit</h5>
                        </span>
                        <span id="withdraw_cash_btn" class="exchange-option">
                            <svg viewBox="0 0 73 73">
                                <line x1="33.78" y1="63.73" x2="33.78" y2="23.63"/>
                                <polyline points="19.61,37.42 33.78,23.24 47.96,37.42 "/>
                                <line x1="40.47" y1="16.41" x2="53.83" y2="16.41"/>
                                <rect x="0.5" y="0.5" transform="matrix(6.123234e-17 -1 1 6.123234e-17 0 73)" class="st1" width="72" height="72"/>
                            </svg>
                            <h5>Withdraw</h5>
                        </span>
                    </div>
                </div>
            </div>
            <div id="orders_panel" class="top-padding top-margin card">
                <h3 class="light-text bottom-padding">
                    Trade History
                </h3>
                <div class="grid grid-2">
                    <div class="balance-display">
                    </div>
                    <div class="balance-display">
                    </div>
                </div>
            </div>
        </div>
        <div id="right">
            <div id="user" class="grid grid-2 bottom-margin card">
                <div id="profile_pic">

                </div>
                <div>
                    <h5 class="light-text">FLO ID</h5>
                    <h4 class="breakable">FFS5hFXG7DBtdgzrLwixZLpenAmsCKRddm</h4>
                    <button onclick="signOut()" class="top-margin">Sign Out</button>
                </div>
            </div>
            <div id="balance_panel" class="top-padding card">
                <h3 class="light-text bottom-padding">
                    Balance
                </h3>
                <div class="grid grid-2">
                    <div class="balance-display">
                        <h5 class="light-text">Cash</h5>
                        <h2 id="user_cash_bal">
                            â‚¹50000
                        </h2>
                    </div>
                    <div class="balance-display">
                        <h5 class="light-text">Crypto</h5>
                        <h2 id="user_crypto_bal">
                            600 BTC
                        </h2>
                    </div>
                </div>
            </div>
        </div>
        <!-- Crypto section-->
        <div class="popup-container hide">
            <div id="send_crypto_popup" class="popup">
                <div class="container-header bottom-margin">
                    <svg class="back-arrow" onclick="hidePopup(this)" viewBox="0 0 31.24 56.83">
                        <title>Close this popup</title>
                        <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                    </svg>
                    <h3>Send Crypto</h3>
                    <div class="action">
                        <button class="btn" type="submit">
                            Send
                        </button>
                        <svg viewBox="0 0 73 73" class="loader">
                            <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                        </svg>
                    </div>
                </div>
                <h5>Select Crypto</h5>
                <div class="crypto-selector flex expand">
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>BTC</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>FLO</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                </div>
                <span class="input">
                    <input type="text" required>
                    <label>Sender's FLO ID</label>
                </span>
                <span class="input">
                    <input type="password" required>
                    <label>Sender's Private key</label>
                </span>
                <span class="input">
                    <input type="text" required>
                    <label>Reciever's FLO ID</label>
                </span>
                <span class="input">
                    <input type="number" inputmode="numeric" required>
                    <label>Amount</label>
                </span>
            </div>
        </div>
        <div class="popup-container hide">
            <div id="deposit_crypto_popup" class="popup">
                <div class="container-header bottom-margin">
                    <svg class="back-arrow" onclick="hidePopup(this)" viewBox="0 0 31.24 56.83">
                        <title>Close this popup</title>
                        <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                    </svg>
                    <h3>Deposit Crypto</h3>
                    <div class="action">
                        <button class="btn" type="submit" >
                            Deposit
                        </button>
                        <svg viewBox="0 0 73 73" class="loader">
                            <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                        </svg>
                    </div>
                </div>
                <h5>Select Crypto</h5>
                <div class="crypto-selector flex expand">
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>BTC</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>FLO</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                </div>
                <span class="input">
                    <input type="text" required>
                    <label>Sender's FLO ID</label>
                </span>
                <span class="input">
                    <input type="password" required>
                    <label>Sender's Private key</label>
                </span>
                <span class="input">
                    <input type="number" inputmode="numeric" required>
                    <label>Amount</label>
                </span>
            </div>
        </div>
        <div class="popup-container hide">
            <div id="withdraw_crypto_popup" class="popup">
                <div class="container-header bottom-margin">
                    <svg class="back-arrow" onclick="hidePopup(this)" viewBox="0 0 31.24 56.83">
                        <title>Close this popup</title>
                        <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                    </svg>
                    <h3>Withdraw Crypto</h3>
                    <div class="action" onclick="btnLoading(this, 'start')">
                        <button class="btn" type="submit" >
                            withdraw
                        </button>
                        <svg viewBox="0 0 73 73" class="loader">
                            <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                        </svg>
                    </div>
                </div>
                <h5>Select Crypto</h5>
                <div class="crypto-selector flex expand">
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>BTC</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                    <label class="select-crypto">
                        <input name="crypto" type="radio">
                        <div class="icon">
            
                        </div>
                        <h4>FLO</h4>
                        <svg class="selected" viewBox="0 0 73 73">
                            <circle cx="36.5" cy="36.5" r="36"/>
                            <polyline points="18.23,37.39 29.73,48.9 54.77,25.21 "/>
                        </svg>
                    </label>
                </div>
                <span class="input">
                    <input type="text" required>
                    <label>Recieving crypto Address</label>
                </span>
                <span class="input">
                    <input type="number" inputmode="numeric" required>
                    <label>Amount</label>
                </span>
            </div>
        </div>
        <!-- Cash section-->
        <div class="popup-container hide">
            <div id="deposit_cash_popup" class="popup">
                <div class="container-header bottom-margin">
                    <svg class="back-arrow" onclick="hidePopup(this)" viewBox="0 0 31.24 56.83">
                        <title>Close this popup</title>
                        <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                    </svg>
                    <h3>Deposit Cash</h3>
                    <div class="action">
                        <button class="btn" type="submit" >
                            Deposit
                        </button>
                        <svg viewBox="0 0 73 73" class="loader">
                            <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                        </svg>
                    </div>
                </div>
                <span class="input">
                    <input type="text" required>
                    <label>Depositer's UPI address</label>
                </span>
                <span class="input">
                    <input type="number" inputmode="numeric" required>
                    <label>Amount in â‚¹</label>
                </span>
            </div>
        </div>
        <div class="popup-container hide">
            <div id="withdraw_cash_popup" class="popup">
                <div class="container-header bottom-margin">
                    <svg class="back-arrow" onclick="hidePopup(this)" viewBox="0 0 31.24 56.83">
                        <title>Close this popup</title>
                        <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                    </svg>
                    <h3>Withdraw Cash</h3>
                    <div class="action">
                        <button class="btn" type="submit" >
                            withdraw
                        </button>
                        <svg viewBox="0 0 73 73" class="loader">
                            <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                        </svg>
                    </div>
                </div>
                <span class="input">
                    <input type="text" required>
                    <label>Recieving UPI Address</label>
                </span>
                <span class="input">
                    <input type="number" inputmode="numeric" required>
                    <label>Amount in â‚¹</label>
                </span>
            </div>
        </div>
    </main>
    <script id="ui_functions">
            if(!navigator.onLine) 
                showMessage('error', 'There seems to be a problem connecting to the internet.', 'fixed')
            window.addEventListener('offline', () =>{
                showMessage('error', 'There seems to be a problem connecting to the internet.', 'fixed')
            })
            window.addEventListener('online', () =>{
                showMessage('', 'We are back online.')
            }) 
            // function required for popups or modals to appear
            function showPopup(popup, permission){ 
                let thisPopup = document.getElementById(popup);
                thisPopup.parentNode.classList.remove('hide');    
                thisPopup.classList.add('no-transformations');    
                window.onmousedown = function(event) {
                    if (event.target == thisPopup.parentNode && permission !== 'no')
                        hidePopup(popup, permission);
                }
            }

            // hides the popup or modal 
            function hidePopup(pop, permission){
                let popup;
                typeof pop === 'string' ? popup = document.getElementById(pop) : popup = pop.closest('.popup');
                if(permission === 'no') return;
                popup.closest('.popup-container').classList.add('hide');    
                popup.closest('.popup').classList.remove('no-transformations'); 
                setTimeout(() => {
                    clearAllInputs(popup) 
                    if(popup.querySelector('.btn')){
                        popup.querySelector('.btn').classList.remove('clip')
                        popup.querySelector('.loader').classList.remove('animate-loader')
                    }
                }, 300)
            }

            function setAttributes(el, attrs) {
                for(var key in attrs) {
                    el.setAttribute(key, attrs[key]);
                }
            }

            function clearAllInputs(parent){
                parent.querySelectorAll("input, textarea").forEach((field) => {
                    field.value = '';
                })
            }

            let currentTimeout;
            function showMessage(mode, message, behavior){
                let banner = document.getElementById('show_message')
                if(mode === 'error')
                    banner.style.background = '#D32F2F';
                else
                    banner.style.background = '#00C853';
                banner.classList.add('no-transformations')
                banner.classList.remove('hide')
                banner.children[0].textContent = message.charAt(0).toUpperCase() + message.slice(1);
                banner.children[1].onclick = function() {
                    banner.classList.add('hide')
                    banner.classList.remove('no-transformations')
                }
                clearTimeout(currentTimeout)
                if(behavior === 'fixed') return;
                currentTimeout = setTimeout(()=>{
                    banner.classList.add('hide')
                    banner.classList.remove('no-transformations')
                }, 4000)
            }
            let askConfirmation = function(message){
                return new Promise((resolve, reject) => {
                    let popup = document.getElementById('confirmation');
                    showPopup('confirmation')
                    popup.children[0].textContent = message;
                    popup.children[1].firstElementChild.onclick = function() {
                        hidePopup('confirmation')
                        resolve(false)
                    }
                    popup.children[1].children[1].onclick = function() {
                        hidePopup('confirmation')
                        resolve(true);
                    }
                })
            }
            function enableBtn(btn){
                if(typeof btn === 'string')
                    btn = document.getElementById(btn);
                if(btn.disabled)
                    btn.disabled = false;
            }

            function disableBtn(btn){
                if(typeof btn === 'string')
                    btn = document.getElementById(btn);
                if(!btn.disabled)
                    btn.disabled = true;
            }
        let allExchangeSections = document.querySelectorAll('.exchange-section'),
            allExchangeBtns = document.querySelectorAll('.exchange-btn');
        function showSection(thisBtn, elem){
            let element = document.getElementById(elem)
            allExchangeSections.forEach((section) => {
                section.classList.add('hide-completely')
            })
            allExchangeBtns.forEach((btn) => {
                btn.classList.remove('active')
            })
            element.classList.remove('hide-completely')
            thisBtn.classList.add('active')
        }
        document.getElementById('switcher_body').addEventListener('click', (e) => {
            if(e.target.closest('#send_crypto_btn'))
                showPopup('send_crypto_popup')
            if(e.target.closest('#deposit_crypto_btn'))
                showPopup('deposit_crypto_popup')
            if(e.target.closest('#withdraw_crypto_btn'))
                showPopup('withdraw_crypto_popup')
            if(e.target.closest('#deposit_cash_btn'))
                showPopup('deposit_cash_popup')
            if(e.target.closest('#withdraw_cash_btn'))
                showPopup('withdraw_cash_popup')
        })
        function btnLoading(btn, option){
            if(typeof btn === 'string')
                btn = document.getElementById(btn);
            if(option === 'start'){
                btn.children[0].classList.add('clip')
                btn.children[1].classList.add('animate-loader')
            }
            else{
                btn.children[0].classList.remove('clip')
                btn.children[1].classList.remove('animate-loader')
            }
        }
        function signOut(){
            askConfirmation('Do you want to sign out?').then((result) => {
                if(result)
                    console.log('signed out')
            })
        }
    </script>
</body>
</html>