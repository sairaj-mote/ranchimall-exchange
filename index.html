<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Local Bitcoin++</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
	<div id="event_log" class="hide">
		<header class="flex">
			<h3>Event Log</h3>
			<svg viewBox="0 0 64 64" onclick="closeMessage()">
				<title>Close</title>
				<line x1="0" y1="0" x2="64" y2="64"/>
				<line class="a" x1="64" y1="0" x2="0" y2="64"/>
			</svg>
		</header>
		<div id="log">
		</div>
	</div>
  <audio id="notification_sound">
    <source src="https://rmservices.duckdns.org/files/notification-sound.mp3" type="audio/mpeg">
    <source src="https://rmservices.duckdns.org/files/notification-sound.ogg" type="audio/ogg">
  </audio>

<h5 id="textCopied" class="hide">
    Copied
</h5>

  <div class="popup-container hide">
    <div id="confirmation" class="popup">
        <p></p>
        <div>
            <button class="hover" onclick="hidePopup()">Cancel</button>
            <button class="hover">Ok</button>
        </div>
    </div>
  </div>
    <div id="show_message" class="hide">
    <svg id="error_icon" class="notification-icon hide-completely" viewBox="0 0 100 100">
        <title>Error icon</title>
        <path d="M50,0a50,50,0,1,0,50,50A50,50,0,0,0,50,0ZM46,27.18A.79.79,0,0,1,46.6,27h7.72a.79.79,0,0,1,.79.79l-1,28.76a.79.79,0,0,
        1-.79.79H47.46a.77.77,0,0,1-.56-.23.73.73,0,0,1-.23-.56l-.86-28.76A.77.77,0,0,1,46,27.18Zm7.68,44.39A4.91,4.91,0,0,1,50,73.05a5.08,5.08,
        0,0,1-5.21-5.21A5,5,0,0,1,50,62.63a5,5,0,0,1,3.73,1.45,5.18,5.18,0,0,1,1.42,3.76A5.11,5.11,0,0,1,53.72,71.57Z"/>
    </svg>
    <svg id="done_icon" class="notification-icon" viewBox="0 0 100 100">
        <title>Done icon</title>
        <path d="M50,0a50,50,0,1,0,50,50A50,50,0,0,0,50,0ZM80.85,32.37,40.3,72.92a1.24,1.24,0,0,1-1.75,0l-19.4-19.4a1.23,1.23,0,0,1,0-1.75l3.54-3.54a1.23,
        1.23,0,0,1,1.74,0L38.55,62.35a1.24,1.24,0,0,0,1.75,0L75.57,27.08a1.23,1.23,0,0,1,1.74,0l3.54,3.54A1.23,1.23,0,0,1,80.85,32.37Z"/>
    </svg>
    <div>
        <h5>Notification</h5>
        <span id="notification_text">Message</span>
    </div>
        <button id="hide_banner_btn">
        <svg viewBox="0 0 50 50">
            <title>Close this notification</title>
            <line x1="50" y1="0" x2="0" y2="50"/>
            <line x1="0" y1="0" x2="50" y2="50"/>
        </svg>
        </button>
	</div>
	<!-- Loading screen-->
	<div class="popup-container solid-background hide">
		<div id="main_loader" class="popup">
			<svg id="loader" viewBox="0 0 73 73">
				<title>Loader</title>
				<path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
			</svg>
			<h3 id="tip_container">Loading Local Bitcoin++</h3>
		</div>
	</div>
    <!--Sign in popup-->
    <div class="popup-container solid-background hide">
    <div id="sign_in_popup" class="popup">
        <div class="container-header">
            <h1>Sign In</h1>
        </div>
        <p class="expand light-text">Welcome to RanchiMall Crypto exchange <b>Local Bitcoin++</b></p>
        <label class="input">
            <input id="get_priv_key_field" type="password" required>
            <div class="label">Private Key</div>
            </label>
        <div class="action expand" id="signInBtn">
            <button class="primary-btn expand" type="submit" disabled>
                Sign In
            </button>
            <svg viewBox="0 0 73 73" class="loader">
                <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
            </svg>
        </div>
        <p class="light-text">
            Don't have private key, get it from <a href="https://flo-webwallet.duckdns.org/" target="_blank">here</a>.
        </p>
        <svg id="sign_in_illustration" viewBox="0 0 612 276.03">
            <defs><style>.a{fill:#ee2a7b;}.b{fill:#9e1f63;}.c{fill:#da1c5c;}</style></defs>
            <title>Untitled-1</title>
            <polygon class="a" points="0 0 0 276.03 195.07 207.16 233.66 0 0 0"/>
            <polygon class="b" points="114.09 0 117.19 27.93 356.1 132.63 536.42 0 114.09 0"/>
            <polygon class="c" points="480.49 0 538.11 99.8 612 99.8 612 0 480.49 0"/>
        </svg>
    </div>
    </div> 

<header id="main_header" class="flex">
    <svg id="main_logo" viewBox="0 0 27.25 32">
        <title>RanchiMall</title>
        <path d="M27.14,30.86c-.74-2.48-3-4.36-8.25-6.94a20,20,0,0,1-4.2-2.49,6,6,0,0,1-1.25-1.67,4,4,0,0,1,0-2.26c.37-1.08.79-1.57,3.89-4.55a11.66,11.66,0,0,0,3.34-4.67,6.54,6.54,0,0,0,.05-2.82C20,3.6,18.58,2,16.16.49c-.89-.56-1.29-.64-1.3-.24a3,3,0,0,1-.3.72l-.3.55L13.42.94C13,.62,12.4.26,12.19.15c-.4-.2-.73-.18-.72.05a9.39,9.39,0,0,1-.61,1.33s-.14,0-.27-.13C8.76.09,8-.27,8,.23A11.73,11.73,0,0,1,6.76,2.6C4.81,5.87,2.83,7.49.77,7.49c-.89,0-.88,0-.61,1,.22.85.33.92,1.09.69A5.29,5.29,0,0,0,3,8.33c.23-.17.45-.29.49-.26a2,2,0,0,1,.22.63A1.31,1.31,0,0,0,4,9.34a5.62,5.62,0,0,0,2.27-.87L7,8l.13.55c.19.74.32.82,1,.65a7.06,7.06,0,0,0,3.46-2.47l.6-.71-.06.64c-.17,1.63-1.3,3.42-3.39,5.42L6.73,14c-3.21,3.06-3,5.59.6,8a46.77,46.77,0,0,0,4.6,2.41c.28.13,1,.52,1.59.87,3.31,2,4.95,3.92,4.95,5.93a2.49,2.49,0,0,0,.07.77h0c.09.09,0,.1.9-.14a2.61,2.61,0,0,0,.83-.32,3.69,3.69,0,0,0-.55-1.83A11.14,11.14,0,0,0,17,26.81a35.7,35.7,0,0,0-5.1-2.91C9.37,22.64,8.38,22,7.52,21.17a3.53,3.53,0,0,1-1.18-2.48c0-1.38.71-2.58,2.5-4.23,2.84-2.6,3.92-3.91,4.67-5.65a3.64,3.64,0,0,0,.42-2A3.37,3.37,0,0,0,13.61,5l-.32-.74.29-.48c.17-.27.37-.63.46-.8l.15-.3.44.64a5.92,5.92,0,0,1,1,2.81,5.86,5.86,0,0,1-.42,1.94c0,.12-.12.3-.15.4a9.49,9.49,0,0,1-.67,1.1,28,28,0,0,1-4,4.29C8.62,15.49,8.05,16.44,8,17.78a3.28,3.28,0,0,0,1.11,2.76c.95,1,2.07,1.74,5.25,3.32,3.64,1.82,5.22,2.9,6.41,4.38A4.78,4.78,0,0,1,21.94,31a3.21,3.21,0,0,0,.14.92,1.06,1.06,0,0,0,.43-.05l.83-.22.46-.12-.06-.46c-.21-1.53-1.62-3.25-3.94-4.8a37.57,37.57,0,0,0-5.22-2.82A13.36,13.36,0,0,1,11,21.19a3.36,3.36,0,0,1-.8-4.19c.41-.85.83-1.31,3.77-4.15,2.39-2.31,3.43-4.13,3.43-6a5.85,5.85,0,0,0-2.08-4.29c-.23-.21-.44-.43-.65-.65A2.5,2.5,0,0,1,15.27.69a10.6,10.6,0,0,1,2.91,2.78A4.16,4.16,0,0,1,19,6.16a4.91,4.91,0,0,1-.87,3c-.71,1.22-1.26,1.82-4.27,4.67a9.47,9.47,0,0,0-2.07,2.6,2.76,2.76,0,0,0-.33,1.54,2.76,2.76,0,0,0,.29,1.47c.57,1.21,2.23,2.55,4.65,3.73a32.41,32.41,0,0,1,5.82,3.24c2.16,1.6,3.2,3.16,3.2,4.8a1.94,1.94,0,0,0,.09.76,4.54,4.54,0,0,0,1.66-.4C27.29,31.42,27.29,31.37,27.14,30.86ZM6.1,7h0a3.77,3.77,0,0,1-1.46.45L4,7.51l.68-.83a25.09,25.09,0,0,0,3-4.82A12,12,0,0,1,8.28.76c.11-.12.77.32,1.53,1l.63.58-.57.84A10.34,10.34,0,0,1,6.1,7Zm5.71-1.78A9.77,9.77,0,0,1,9.24,7.18h0a5.25,5.25,0,0,1-1.17.28l-.58,0,.65-.78a21.29,21.29,0,0,0,2.1-3.12c.22-.41.42-.76.44-.79s.5.43.9,1.24L12,5ZM13.41,3a2.84,2.84,0,0,1-.45.64,11,11,0,0,1-.9-.91l-.84-.9.19-.45c.34-.79.39-.8,1-.31A9.4,9.4,0,0,1,13.8,2.33q-.18.34-.39.69Z"/>
    </svg>
	<span class="expand">
		<h5>RanchiMall</h5>
		<h2>Local Bitcoin++</h2>
	</span>
	<svg class="icon" viewBox="0 0 64 64" onclick="displayMessages()">
		<title>Console</title>
		<rect x="0" y="0" width="64" height="64" rx="6"/>
		<polyline points="14.6 16.3 30.3 32 14.6 47.7"/>
		<line x1="30.73" y1="47.7" x2="49.4" y2="47.7"/>
	</svg>
	<div id="notifiation" class="dropdown">
		<span>
			<svg class="icon" viewBox="0 0 50.49 64" onclick="showNotifications()">
				<title>Notifications</title>
				<path d="M51.47,53.09A3.9,3.9,0,0,0,56,50l.42-2.3a2.56,2.56,0,0,0-1-2.44c-3.18-2.56-3.58-7.27-3-10.54.74-4.07,1.7-9.3,1.72-9.46,2-11.08-1.62-17.7-7.6-21.52A18.74,18.74,0,0,0,32.75,1.17C25.81,2.61,20.05,7.51,18,18.6c0,.16-1,5.38-1.74,9.45-.6,3.27-2.64,7.54-6.52,8.81A2.54,2.54,0,0,0,8,38.8l-.42,2.3a3.91,3.91,0,0,0,3.14,4.54Z" transform="translate(-6.75 0)"/>
				<path d="M25.23,53.38c0,.18,0,.36,0,.54A9.3,9.3,0,0,0,43.39,56.7Z" transform="translate(-6.75 0)"/>
			</svg>
			<div id="notification_badge" data-badge='0'></div>
		</span>
		<div id="notification_panel" class="dropdown-content hide">
			<header>
				<h3>Notifications</h3>
				<h5 id="clear_all_notifications" onclick="clearAllNotifications()">Clear all</h5>
      		</header>
			<div id="notification_container"></div>
			<h4 class="empty-state">Nothing to see here</h4>
		</div>
	</div>
</header>
<main class="">
    <div id="left" class="bottom-margin grid">
        <div id="exchange" class="card">
            <ul id="switcher_header" class="grid">
                <li tabindex="0" onclick="showSection(this, 'asset_section')" class="active exchange-btn" title="Buy or sell crypto assets">Trade</li>
                <li tabindex="0" onclick="showSection(this, 'crypto_section')" class="exchange-btn" title="Deposit or withdraw crypto assets">Crypto</li>
                <li tabindex="0" onclick="showSection(this, 'cash_section')" class="exchange-btn" title="Deposit or withdraw cash">Cash</li>
            </ul>
            <div id="switcher_body">
                <div id="asset_section" class="exchange-section grid">
				<span id="buy_crypto_btn" class="exchange-option" title="Buy crypto">
						<svg viewBox="0 0 47 64.15">
							<title>Buy crypto</title>
							<path d="M42.19,13.67V9.52a8.68,8.68,0,1,0-17.35,0v4.15" transform="translate(-10 0.16)"/>
							<line x1="34.08" y1="14.63" x2="30.24" y2="14.63"/>
							<line x1="16.79" y1="14.63" x2="12.94" y2="14.63"/>
							<line x1="23.2" y1="29.5" x2="23.2" y2="43.37"/>
							<line x1="30.14" y1="36.43" x2="16.27" y2="36.43"/>
							<rect x="1" y="9.16" width="45" height="54" rx="4"/>
							<line x1="1" y1="54.16" x2="46" y2="54.16"/>
						</svg>
                        <h5>Buy</h5>
                    </span>
                    <span id="sell_crypto_btn" class="exchange-option" title="Sell crypto">
						<svg viewBox="0 0 47 64.15">
							<title>Sell crypto</title>
							<path d="M42.19,13.67V9.52a8.68,8.68,0,1,0-17.35,0v4.15" transform="translate(-10 0.16)"/>
							<line x1="34.08" y1="14.63" x2="30.24" y2="14.63"/>
							<line x1="16.79" y1="14.63" x2="12.94" y2="14.63"/>
							<line x1="30.14" y1="36.43" x2="16.27" y2="36.43"/>
							<rect x="1" y="9.16" width="45" height="54" rx="4"/>
							<line x1="1" y1="54.16" x2="46" y2="54.16"/>
						</svg>                 
                        <h5>Sell</h5>
                    </span>
                </div>
                <div id="crypto_section" class="exchange-section grid hide-completely">
                    <span id="send_crypto_btn" class="exchange-option">
                        <svg viewBox="0 0 72 72">
							<title>Send token icon</title>
							<polygon points="69.65 0.8 1.33 27.53 28.06 36.45 34.01 36.45 34.01 42.39 42.92 69.12 69.65 0.8"/>
						</svg>                                              
                        <h5>Send</h5>
                    </span>
                    <span id="deposit_crypto_btn" class="exchange-option">
						<svg viewBox="0 0 52 51.5">
							<title>deposit icon</title>
							<line x1="4" y1="28" x2="4" y2="19.5"/>
							<polyline points="4 6 4 1 51 1 51 48 4 48 4 41.5"/>
							<line x1="9" y1="50" x2="18" y2="50"/>
							<line x1="36" y1="50" x2="45" y2="50"/>
							<circle cx="27.5" cy="30" r="9.5"/>
							<circle cx="27.5" cy="30" r="3.5"/>
							<rect x="1" y="6" width="6" height="13.5" rx="2.76"/>
							<rect x="1" y="28" width="6" height="13.5" rx="2.76"/>
						</svg>                     
                        <h5>Deposit</h5>
                    </span>
                    <span id="withdraw_crypto_btn" class="exchange-option">
						<svg class="icon banking" viewBox="0 0 52 60">
							<title>withdraw icon</title>
							<line x1="4" y1="33.5" x2="4" y2="25"/>
							<polyline points="41.52 6.5 51 6.5 51 53.5 41.69 53.5"/>
							<line x1="9" y1="55.5" x2="14" y2="55.5"/>
							<line x1="43" y1="55.5" x2="45" y2="55.5"/>
							<rect x="1" y="11.5" width="6" height="13.5" rx="2.76"/>
							<rect x="1" y="33.5" width="6" height="13.5" rx="2.76"/>
							<polyline points="3.81 11.5 3.81 6.5 41.5 1 41.69 59 3.81 53.5 3.81 47"/>
							<path d="M35.64,39.19c0,6.31-3.25,11.45-7.22,11.48s-7-4.92-7-11.07,3.13-11.29,7.05-11.48S35.64,32.88,35.64,39.19Z" transform="translate(-6 -2)"/>
							<path d="M31.06,39.32c0,2.31-1.19,4.2-2.64,4.23s-2.62-1.79-2.62-4.08S27,35.3,28.42,35.24,31.06,37,31.06,39.32Z" transform="translate(-6 -2)"/>
						</svg>
                        <h5>Withdraw</h5>
                    </span>
                </div>
                <div id="cash_section" class="exchange-section grid hide-completely">
                    <span id="deposit_cash_btn" class="exchange-option">
                        <svg viewBox="0 0 52 51.5">
							<title>deposit icon</title>
							<line x1="4" y1="28" x2="4" y2="19.5"/>
							<polyline points="4 6 4 1 51 1 51 48 4 48 4 41.5"/>
							<line x1="9" y1="50" x2="18" y2="50"/>
							<line x1="36" y1="50" x2="45" y2="50"/>
							<circle cx="27.5" cy="30" r="9.5"/>
							<circle cx="27.5" cy="30" r="3.5"/>
							<rect x="1" y="6" width="6" height="13.5" rx="2.76"/>
							<rect x="1" y="28" width="6" height="13.5" rx="2.76"/>
						</svg>                             
                        <h5>Deposit</h5>
                    </span>
                    <span id="withdraw_cash_btn" class="exchange-option">
						<svg class="icon banking" viewBox="0 0 52 60">
							<title>withdraw icon</title>
							<line x1="4" y1="33.5" x2="4" y2="25"/>
							<polyline points="41.52 6.5 51 6.5 51 53.5 41.69 53.5"/>
							<line x1="9" y1="55.5" x2="14" y2="55.5"/>
							<line x1="43" y1="55.5" x2="45" y2="55.5"/>
							<rect x="1" y="11.5" width="6" height="13.5" rx="2.76"/>
							<rect x="1" y="33.5" width="6" height="13.5" rx="2.76"/>
							<polyline points="3.81 11.5 3.81 6.5 41.5 1 41.69 59 3.81 53.5 3.81 47"/>
							<path d="M35.64,39.19c0,6.31-3.25,11.45-7.22,11.48s-7-4.92-7-11.07,3.13-11.29,7.05-11.48S35.64,32.88,35.64,39.19Z" transform="translate(-6 -2)"/>
							<path d="M31.06,39.32c0,2.31-1.19,4.2-2.64,4.23s-2.62-1.79-2.62-4.08S27,35.3,28.42,35.24,31.06,37,31.06,39.32Z" transform="translate(-6 -2)"/>
						</svg>
                        <h5>Withdraw</h5>
                    </span>
                </div>
            </div>
        </div>
        <div id="orders_panel" class="top-padding top-margin card">
            <h3 class="light-text bottom-padding bottom-margin" onclick="showPopup('main_loader', 'no')">
                My Orders
			</h3>
            <div id="orders_container"></div>
            <h3 class="empty-state">
                No trade orders yet.
            </h3>
        </div>
    </div>
    <div id="right">
            <div id="user" class="grid grid-2 bottom-margin card">
              <svg id="profile_pic" viewBox="0 0 49.54 61.12">
                <title>User icon</title>
                <path d="M49.34,19.94c7.73,0,13.26,5.26,13.26,14S58.18,50.14,49.71,50.08,36.82,42.66,36.82,33.93s5.53-14,13.26-14" transform="translate(-25.23 -20)"/>
                <path d="M43.83,52c-2.34,4.38-9.77,6.64-15.31,9.06-2.29,1-4.11,13-1.53,13a46.06,46.06,0,0,0,23.51,6,40.48,40.48,0,0,0,22.51-6c2.58,0,.76-12-1.53-13-5.54-2.42-13-4.68-15.31-9.06" transform="translate(-25.23 -19.44)"/>
              </svg>
                <div>
                    <h5 class="light-text">FLO ID</h5>
                    <h4 class="breakable" id="localbitcoinuserdiv"></h4>
                    <button onclick="signOut()" class="top-margin">Sign Out</button>
                </div>
            </div>
            <div id="market_price_display" class="card bottom-margin">
              <div class="flex">
                <h3 class="light-text">
                  Market price
                </h3>
                <div id="refresh_market_price" class="action">
                  <button type="submit">
                      refresh
                  </button>
                  <svg viewBox="0 0 73 73" class="loader">
                      <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                  </svg>
                </div>
              </div>
              <span class="crypto-price grid">
                <svg viewBox="0 0 30.61 40.52" class="icon btc">
                  <title>Bitcoin icon</title>
                    <path d="M30.53,16.29c0.64-4.26-2.61-6.55-7.04-8.07l1.44-5.77l-3.51-0.88l-1.4,5.62c-0.92-0.23-1.87-0.45-2.81-0.66
                    l1.41-5.65L15.11,0l-1.44,5.77c-0.76-0.17-1.51-0.35-2.24-0.53l0-0.02L6.59,4.01L5.66,7.76c0,0,2.61,0.6,2.55,0.63
                    c1.42,0.36,1.68,1.3,1.64,2.04l-1.64,6.57c0.1,0.02,0.23,0.06,0.36,0.12c-0.12-0.03-0.24-0.06-0.37-0.09l-2.3,9.2
                    c-0.17,0.43-0.61,1.08-1.61,0.83c0.04,0.05-2.55-0.64-2.55-0.64L0,30.45l4.57,1.14c0.85,0.21,1.68,0.44,2.5,0.65l-1.45,5.83
                    l3.51,0.88l1.44-5.77c0.96,0.26,1.89,0.5,2.8,0.73l-1.43,5.74l3.51,0.88l1.45-5.82c5.99,1.13,10.49,0.68,12.38-4.74
                    c1.53-4.36-0.08-6.88-3.23-8.52C28.34,20.92,30.07,19.41,30.53,16.29L30.53,16.29z M22.51,27.54c-1.08,4.36-8.43,2-10.81,1.41
                    l1.93-7.73C16.01,21.82,23.65,22.99,22.51,27.54L22.51,27.54z M23.6,16.23c-0.99,3.97-7.1,1.95-9.08,1.46l1.75-7.01
                    C18.25,11.17,24.63,12.09,23.6,16.23z"/>
                </svg>
                <span>
                  <h4 class="expand">Bitcoin</h4>
                  <h5>BTC</h5>
                </span>
                <h3 id="btc_market_price"></h3>
              </span>
              <span class="crypto-price grid">
                <svg class="icon flo" viewBox="0 0 45.6 47.07">
                  <title>FLO coin icon</title>
                  <path d="M61.4,58.86A12.31,12.31,0,0,0,68.81,55a15.45,15.45,0,0,0,4-8.52c-11-.63-12.36,1-13.71,1.68-1.19.61-5.33,4.56-5.33,
                    4.56s3.07-3.14,3.2-9.94a19.94,19.94,0,0,0-2.72-10.65A23.86,23.86,0,0,0,50,26.46a24.09,24.09,0,0,0-4.23,5.67A19.94,19.94,0,0,0,43,42.78c.13,6.8,3.2,9.94,
                    3.2,9.94s-4.14-3.95-5.33-4.56c-1.35-.69-2.67-2.31-13.71-1.68a15.45,15.45,0,0,0,4,8.52,12.31,12.31,0,0,0,7.41,3.86s-5.05-2-7.15-9.45c0,0,5.76-.69,9.63,1.87,
                    2.53,1.67,4.86,4.26,6.79,6a17.72,17.72,0,0,0-6.81,1.88,7.85,7.85,0,0,0-4.44,4.38,5.65,5.65,0,0,0-.19,2.27,33.8,33.8,0,0,0,5.94,0,5.87,5.87,0,0,0,3.42-2.16,
                    12.72,12.72,0,0,1-3.95.77c-2.06,0-2.67-.66-2.67-.66,1-3.64,8.68-5.19,8.68-5.19a16.13,16.13,0,0,0-1.42,6.5A12.76,12.76,0,0,0,50,73.53a12.76,12.76,0,0,0,
                    3.57-8.45,16.13,16.13,0,0,0-1.42-6.5s7.71,1.55,8.68,5.19c0,0-.61.66-2.67.66a12.72,12.72,0,0,1-3.95-.77,5.87,5.87,0,0,0,3.42,2.16,33.8,33.8,0,0,0,5.94,0,
                    5.65,5.65,0,0,0-.19-2.27,7.85,7.85,0,0,0-4.44-4.38,17.72,17.72,0,0,0-6.81-1.88c1.93-1.75,4.26-4.34,6.79-6,3.87-2.56,9.63-1.87,9.63-1.87C66.45,56.84,61.4,
                    58.86,61.4,58.86ZM50,69.52a6.1,6.1,0,0,1-1.47-4.26A10.74,10.74,0,0,1,50,60.12a10.74,10.74,0,0,1,1.47,5.14A6.1,6.1,0,0,1,50,69.52Zm0-15.23a17.26,17.26,0,0,
                    1-4.35-11c0-9,4.35-11.84,4.35-11.84s4.35,2.84,4.35,11.84A17.26,17.26,0,0,1,50,54.29Z" transform="translate(-27.2 -26.46)"/>
                </svg>
                <span>
                  <h4 class="expand">FLO</h4>
                  <h5>FLO</h5>
                </span>
                <h3 id="flo_market_price"></h3>
              </span>
            </div>
            <div id="balance_panel" class="top-padding card">
				<div class="flex">
					<h3 class="light-text">
						Balance
					</h3>
					<div id="refresh_bal" class="action refresh">
						<button type="submit">
							refresh
						</button>
						<svg viewBox="0 0 73 73" class="loader">
							<path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
						</svg>
					</div>
				  </div>
                <div class="balance-display">
                    <h5 class="light-text">Cash</h5>
                    <h2 id="user_cash_bal">0</h2>
                </div>
                <div class="grid grid-2">
                    <div class="balance-display">
                        <h5 class="light-text">Bitcoin</h5>
                        <h2 id="user_btc_bal">0</h2>
                    </div>
                    <div class="balance-display">
                        <h5 class="light-text">FLO</h5>
                        <h2 id="user_flo_bal">0</h2>
                    </div>
                </div>
            </div>
    </div>
    <div id="popup-parent">
      <!--Asset section-->
      <div class="popup-container hide">
        <div id="buy_crypto_popup" class="popup">
            <div class="container-header bottom-margin">
                <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                    <title>Close this popup</title>
                    <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                </svg>
                <h3>Buy Crypto</h3>
                <div class="action" id="trade_buy_button">
                    <button class="btn" type="submit" disabled>
                        Buy
                    </button>
                    <svg viewBox="0 0 73 73" class="loader">
                        <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                    </svg>
                </div>
            </div>
            <h5>Select Crypto</h5>
            <div class="crypto-selector flex expand" id="selectListCryptoBuy"></div>
            <h5>Select Currency</h5>
            <div class="crypto-selector flex expand" id="selectListFiatBuy"></div>
            <h5>Select Amount</h5>
            <div class="crypto-selector flex expand" id="selectListTradingAmountBuy"></div>
        </div>
      </div>
      <div class="popup-container hide">
          <div id="sell_crypto_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Sell Crypto</h3>
                  <div class="action" id="trade_sell_button">
                      <button class="btn" type="submit" disabled>
                          Sell
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <h5>Select Crypto</h5>
              <div class="crypto-selector flex expand" id="selectListCryptoSell"></div>
              <h5>Select Currency</h5>
              <div class="crypto-selector flex expand" id="selectListFiatSell"></div>
              <h5>Select Amount</h5>
              <div class="crypto-selector flex expand" id="selectListTradingAmountSell"></div>
          </div>
      </div>
      <!-- Crypto section-->
      <div class="popup-container hide">
          <div id="send_crypto_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Send Crypto</h3>
                  <div class="action" onclick="sendCrypto(this)">
                      <button class="btn" type="submit" disabled>
                          Send
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <h5>Select Crypto</h5>
              <div class="crypto-selector flex expand" id="send_crypto_select_div"></div>
              <label class="input">
                  <input name="senderFloId" type="text" required>
                  <div class="label">Sender's Address</div>
              </label>
              <label class="input">
                  <input name="senderPrivateKey" type="password" required>
                  <div class="label">Sender's Private Key</div>
              </label>
              <label class="input">
                  <input name="recieverFloId" type="text" required>
                  <div class="label">Reciever's Address</div>
              </label>
              <label class="input">
                  <input name="amount" type="number" step="0.00000001" inputmode="numeric" required>
                  <div class="label">Amount</div>
              </label>
          </div>
      </div>
      <div class="popup-container hide">
          <div id="deposit_crypto_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Deposit Crypto</h3>
                  <div class="action" id="depositCryptoButton">
                      <button class="btn" type="submit" disabled>
                          Proceed
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <div id="select_deposit_crypto_section" class="expand deposit-crypto-group">
                <h5>Select Crypto</h5>
                <div class="crypto-selector flex expand" id="deposit_crypto_div"></div>
                <label class="input">
                    <input id="trade_amount_select" type="number" step="0.00000001" inputmode="numeric" required>
                    <div class="label">Amount</div>
                </label>
              </div>
                <div id="send_crypto_hidden_section" class="expand hide-completely deposit-crypto-group">
                    <label class="input">
                        <input name="senderFloId" type="text" required disabled>
                        <div class="label">Sender's FLO ID</div>
                    </label>
                    <label class="input">
                        <input name="senderPrivateKey" type="password" required disabled>
                        <div class="label">Sender's Private Key</div>
                    </label>
                </div>
              <div id="confirm_deposit_btn_section" class="expand deposit-crypto-group  hide-completely">
                    <h5> Send crypto to</h5>
                    <div class="grid grid-2 copy-row">
                        <h3 class="breakable">F65wvw685rv48wv9wrvw84rvw8srf46wvwvwv8</h3>
                        <svg class="copy-icon" onclick="copyToClipboard(this.parentNode, '0')" viewBox="0 0 54 64">
                            <title>Copy</title>
                            <path d="M53,0H22.14a6,6,0,0,0-6,6v5H11a6,6,0,0,0-6,6V58a6,6,0,0,0,6,6H41.86a6,6,0,0,0,6-6V53H53a6,6,0,0,0,6-6V6A6,6,0,0,0,53,0ZM43.89,58a2,2,0,0,1-2,2H11a2,2,0,0,1-2-2V17.06a2,2,0,0,1,2-2H41.86a2,2,0,0,1,2,2ZM55,46.94a2,2,0,0,1-2,2H47.89V17.06a6,6,0,0,0-6-6H20.11V6a2,2,0,0,1,2-2H53a2,2,0,0,1,2,2Z" transform="translate(-5)"/>
                        </svg>
                    </div>
                    <h5 class="bottom-margin">You can send crypto from your preferred app or </h5>
                    <div class="grid grid-2">
                        <button class="btn expand secondary-btn" id="cnf_crypto_deposit">
                            Confirm deposit
                        </button>
                        <button id="send_natively" class="btn expand primary-btn">Send from here</button>
                    </div>
                    <h5 class="top-margin">*Click confirm After Sending Crypto To Exchange</h5>

              </div>    
          </div>
      </div>
      <div class="popup-container hide">
          <div id="withdraw_crypto_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Withdraw Crypto</h3>
                  <div class="action" id="withdrawCryptoButton">
                      <button class="btn" type="submit" disabled>
                          withdraw
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <h5>Select Crypto</h5>
              <div class="crypto-selector flex expand" id="withdraw_crypto_div"></div>
              <label class="input">
                  <input id="withdraw_recving_addr" type="text" required>
                  <div class="label">Recieving crypto Address</div>
              </label>
              <label class="input">
                  <input id="crypto_withdraw_amount" inputmode="numeric" type="number" step="0.00000001" required>
                  <div class="label">Amount</div>
              </label>
          </div>
      </div>
      <!-- Cash section-->
      <div class="popup-container hide">
          <div id="deposit_cash_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Deposit Cash</h3>
                  <div class="action" id="depositCashButton">
                      <button class="btn" type="submit" disabled>
                          Deposit
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <label class="input">
                  <input name="upiAddr" pattern="^[a-zA-z0-9]+@[a-zA-z0-9]+" type="text" required>
                  <div class="label">Depositer's UPI address</div>
              </label>
              <label class="input">
                  <input name="amount" type="number" step="0.01" inputmode="numeric" required>
                  <div class="label">Amount</div>
              </label>
              <h3 id="upiToAddress" class="hide-completely"></h3>
          </div>
      </div>
      <div class="popup-container hide">
          <div id="withdraw_cash_popup" class="popup">
              <div class="container-header bottom-margin">
                  <svg class="back-arrow" onclick="hidePopup()" viewBox="0 0 31.24 56.83">
                      <title>Close this popup</title>
                      <polyline points="29.83,1.41 2.83,28.41 29.83,55.41 "/>
                  </svg>
                  <h3>Withdraw Cash</h3>
                  <div class="action" id="withdrawCashButton">
                      <button class="btn" type="submit" disabled>
                          withdraw
                      </button>
                      <svg viewBox="0 0 73 73" class="loader">
                          <path d="M72.5,36.5c0,19.88-16.12,36-36,36s-36-16.12-36-36s16.12-36,36-36S72.5,16.62,72.5,36.5"/>
                      </svg>
                  </div>
              </div>
              <label class="input">
                  <input name="upiAddr" pattern="^[a-zA-z0-9]+@[a-zA-z0-9]+" type="text" required>
                  <div class="label">Recieving UPI address</div>
              </label>
              <label class="input">
                  <input name="amount" type="number" step="0.01" inputmode="numeric" required>
                  <div class="label">Amount</div>
              </label>
          </div>
      </div>
    </div>

    </main>
    <script id="ui_functions">
        let frag = document.createDocumentFragment(),
            currentTimeout,
            notificationSound = document.getElementById('notification_sound');
        const render = {
        // returns an order element;
            order: function(tradeId, type, product, price, currency){
                let card = document.createElement('div'), currencySymbol;
                card.classList.add('order', 'grid', 'grid-2')
                currency === 'INR' ? currencySymbol = '₹' : currencySymbol = '$'; 
                card.innerHTML = `<div class="details">
                            <h3>${type.toUpperCase()}</h3>
                            ${product} worth ${currencySymbol}${price}
                            <h5>Trade Id</h5>
                            <span class="breakable">${tradeId}</span>
                        </div>
                        <button id="${tradeId}-${localbitcoinplusplus.wallets.my_local_flo_address}-${type}" 
                            class="cancel-order">Cancel</button>`;
                return card;
            },
            notification: function(message){
                let card = document.createElement('div');
				  card.classList.add('notification');
				  card.innerHTML = `
					<svg class="remove-notification" viewBox="0 0 50 50">
						<title>Close this notification</title>
						<line x1="50" y1="0" x2="0" y2="50"/>
						<line x1="0" y1="0" x2="50" y2="50"/>
					</svg>
					<p>${message}</p>`
                  return card;
            }
        }

        //Checks for internet connection status
		if(!navigator.onLine) 
			notify('There seems to be a problem connecting to the internet.','error', true)
		window.addEventListener('offline', () =>{
			notify('There seems to be a problem connecting to the internet.','error', true)
		})
		window.addEventListener('online', () =>{
			notify('We are back online.')
		}) 
		
		// function required for popups or modals to appear
		class Stack { 
			constructor(){ 
				this.items = []; 
			} 
			push(element){ 
				this.items.push(element); 
			} 
			pop(){ 
				if (this.items.length == 0) 
					return "Underflow"; 
				return this.items.pop(); 
			}
			peek(){ 
				return this.items[this.items.length - 1]; 
			} 
		} 
		let popupStack = new Stack(),
			loader = document.getElementById('loader'),
			zIndex = 10; 

		function showPopup(popup, permission){ 
			let thisPopup = document.getElementById(popup);
			thisPopup.parentNode.classList.remove('hide');    
			thisPopup.classList.add('no-transformations');    
			popupStack.push({popup, permission})
			zIndex++;
			thisPopup.parentNode.setAttribute('style', `z-index: ${zIndex}`)
			if(popup === 'main_loader'){
                loader.classList.add('animate-loader')
                const tipsInterval = setInterval(changeTips, 2000)
                document.querySelector('main').classList.add('hide-completely')
            }
		}

		// hides the popup or modal 
		function hidePopup(){
			let {popup, permission} = popupStack.pop();
			thisPopup = document.getElementById(popup);
			thisPopup.closest('.popup-container').classList.add('hide');    
			thisPopup.closest('.popup').classList.remove('no-transformations'); 
			setTimeout(() => {
				clearAllInputs(thisPopup) 
				zIndex--;
				thisPopup.parentNode.setAttribute('style', `z-index: ${zIndex}`)
				if(thisPopup.querySelector('.btn')){
					btnLoading(thisPopup.querySelector('.action'), 'stop')
					thisPopup.querySelector("button[type='submit']").disabled = true;
				}
			}, 400)
			if(popup === 'deposit_cash_popup'){
				thisPopup.querySelector('#upiToAddress').classList.add('hide-completely')
				thisPopup.querySelectorAll('.input').forEach((input) => {
				    input.classList.remove('hide-completely')
				})
            }
            if(popup === 'deposit_crypto_popup'){
                setTimeout(() => {
                    depositCryptoButton.classList.remove('hide-completely');
                    showElement(selectDepositCryptoSection, 'deposit-crypto-group');
                    depositCryptoButton.firstElementChild.textContent = 'proceed'
                }, 400)
                document.getElementById('send_crypto_hidden_section').querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                })
                depositCryptoButtonClicked = 0;
            }
			if(popup === 'main_loader'){
                loader.classList.remove('animate-loader')
                clearInterval(tipsInterval)
                document.querySelector('main').classList.remove('hide-completely')
            }
		}

		function setAttributes(el, attrs) {
			for(var key in attrs) {
				el.setAttribute(key, attrs[key]);
			}
		}

		function clearAllInputs(parent){
			parent.querySelectorAll("input").forEach((field) => {
			if(field.getAttribute('type') !== 'radio'){
				field.value = '';
				if(field.closest('.input'))
				{
					field.closest('.input').classList.remove('animate-label')
				}
			}
			else
				field.checked = false
			})
		}

		//Function for displaying toast notifications.
		/*options
		message - notifiation body text.
		mode - error or normal notification. only error has to be specified.
		fixed - if set true notification will not fade after 4s;
		sound - set true to enable notification sound. ! should only be used for important tasks.
		setAside - set true to add notification inside notification panel
		*/
		let currentCount = 0;
		function notify(message, mode, fixed, sound, setAside){
			let banner = document.getElementById('show_message'),
				notificationContainer = document.getElementById('notification_container'),
				notifiationCounter = document.querySelector("#notification_badge");
				currentCount = parseInt(notifiationCounter.getAttribute('data-badge'));
			
			if(mode === 'error'){
				banner.querySelector('#error_icon').classList.remove('hide-completely')
				banner.querySelector('#done_icon').classList.add('hide-completely')
			} 
			else{
				banner.querySelector('#error_icon').classList.add('hide-completely')
				banner.querySelector('#done_icon').classList.remove('hide-completely')
			}
			if(setAside){
				notificationContainer.prepend(render.notification(message));
				console.log(currentCount)
				currentCount++;
				notifiationCounter.setAttribute('data-badge', currentCount);
			}
				
			banner.classList.add('no-transformations')
			banner.classList.remove('hide')
			banner.querySelector('#notification_text').textContent = message.charAt(0).toUpperCase() + message.slice(1);
			if(navigator.onLine && sound){
				notificationSound.currentTime = 0;
				notificationSound.play();
			}
			banner.querySelector('#hide_banner_btn').onclick = function() {
				banner.classList.add('hide')
				banner.classList.remove('no-transformations')
			}
			clearTimeout(currentTimeout)
			if(fixed) return;
			currentTimeout = setTimeout(()=>{
				banner.classList.add('hide')
				banner.classList.remove('no-transformations')
			}, 4000)
		}

		function showNotifications(){
			let notificationPanel = document.getElementById('notification_panel');
			currentCount = 0;
			document.querySelector("#notification_badge").setAttribute('data-badge', currentCount);
			notificationPanel.classList.toggle('hide')
			window.onmousedown = e => {	
				if(!e.target.closest('.dropdown'))
				notificationPanel.classList.add('hide')
			}
		}

		function clearAllNotifications(){
			document.getElementById('notification_container').innerHTML = '';
		}

		// displays a popup for asking permission. Use this instead of JS confirm
		let askConfirmation = function(message){
			return new Promise((resolve, reject) => {
				let popup = document.getElementById('confirmation');
				showPopup('confirmation')
				popup.children[0].textContent = message;
				popup.children[1].firstElementChild.onclick = function() {
					hidePopup()
					resolve(false)
				}
				popup.children[1].children[1].onclick = function() {
					hidePopup()
					resolve(true);
				}
			})
		}
		function enableBtn(btn){
			if(typeof btn === 'string')
				btn = document.getElementById(btn);
			if(btn.disabled)
				btn.disabled = false;
		}

		function disableBtn(btn){
			if(typeof btn === 'string')
				btn = document.getElementById(btn);
			if(!btn.disabled)
				btn.disabled = true;
		}
        function btnLoading(btn, option){
            if(typeof btn === 'string')
                btn = document.getElementById(btn);
            if(option === 'start'){
                btn.children[0].classList.add('clip')
                btn.children[1].classList.add('animate-loader')
            }
            else{
                btn.children[0].classList.remove('clip')
                btn.children[1].classList.remove('animate-loader')
            }
        }

        function copyToClipboard(parent, childIndex) {
            let input = document.createElement('textarea'),
                toast = document.getElementById('textCopied');
            input.setAttribute('readonly', '');
            input.setAttribute('style', 'position: absolute; left: -9999px');
            document.body.appendChild(input);
            input.value = parent.children[childIndex].textContent;
            input.select();
            document.execCommand('copy');
            document.body.removeChild(input);
            toast.classList.remove('hide');
            setTimeout(() => {
                toast.classList.add('hide');
            }, 2000)
        }

        // prevents non numerical input on firefox 
        function preventNonNumericalInput(e) {
            e = e || window.event;
            let charCode = (typeof e.which == "undefined") ? e.keyCode : e.which,
                charStr = String.fromCharCode(charCode);

            if (!charStr.match(/[+-]?([0-9]*[.])?[0-9]+/))
                e.preventDefault();
        }

        function areInputsEmpty(parent){
			let allInputs = parent.querySelectorAll(".input input:not([disabled])"),
				allRadios = parent.querySelectorAll("input[type='radio']"),
				radioStatus, inputStatus, counter = 0;
			inputStatus = [...allInputs].every(input => input.checkValidity())
			
			allRadios.forEach(radio => {
				if(radio.checked)
				counter++;
			})
			if(counter == allRadios.length/2)
				radioStatus = true;
			if(inputStatus && radioStatus)
				return true
			else 
				return false
        }

        function formValidation(formElement, e){ 
			if(formElement.getAttribute('type') === 'number')
				preventNonNumericalInput(e);
			let parent = formElement.closest('.popup'), 
				submitBtn = parent.querySelector("button[type = 'submit']");
			if(areInputsEmpty(parent))
				submitBtn.disabled = false;
			else{
				submitBtn.disabled = true;
				btnLoading(submitBtn.parentNode, 'stop')
			}
        }

        let allExchangeSections = document.querySelectorAll('.exchange-section'),
            allExchangeBtns = document.querySelectorAll('.exchange-btn');
        function showSection(thisBtn, elem){
            let element = document.getElementById(elem)
            allExchangeSections.forEach((section) => {
                section.classList.add('hide-completely')
            })
            allExchangeBtns.forEach((btn) => {
                btn.classList.remove('active')
            })
            element.classList.remove('hide-completely')
            thisBtn.classList.add('active')
		}
		
        // Event delegation when clicked on exchage options
        window.addEventListener('load', ()=> {
            document.getElementById('switcher_body').addEventListener('click', (e) => {
                if(e.target.closest('#buy_crypto_btn'))
                    showPopup('buy_crypto_popup')
                if(e.target.closest('#sell_crypto_btn'))
                    showPopup('sell_crypto_popup')
                if(e.target.closest('#send_crypto_btn'))
                    showPopup('send_crypto_popup')
                if(e.target.closest('#deposit_crypto_btn'))
                    showPopup('deposit_crypto_popup')
                if(e.target.closest('#withdraw_crypto_btn'))
                    showPopup('withdraw_crypto_popup')
                if(e.target.closest('#deposit_cash_btn'))
                    showPopup('deposit_cash_popup')
                if(e.target.closest('#withdraw_cash_btn'))
                    showPopup('withdraw_cash_popup')
			})

			window.addEventListener('mousedown', e => {
				if(e.target.classList.contains('popup-container') && popupStack.peek().permission !== 'no'){
					hidePopup()
				}
			})

			function checkInput(e){
				if(e.target.closest('.input')){
					let parent = e.target.closest('.input');
					if(parent.firstElementChild.value !== '')
					parent.classList.add('animate-label')
					else 
					parent.classList.remove('animate-label')
					formValidation(parent.firstElementChild, e)
                    if(e.key === 'Enter')
						parent.closest('.popup').querySelector("button[type='submit']").click();
				}
			}
            document.getElementById('popup-parent').addEventListener('input', (e) => {
				checkInput(e);
            })
            document.getElementById('popup-parent').addEventListener('keyup', (e) => {
				checkInput(e);
            })

            //Sign in behaviour
            document.getElementById('sign_in_popup').addEventListener('input', (e) => {
				checkInput(e);
            })
            document.getElementById('sign_in_popup').addEventListener('keyup', (e) => {
				checkInput(e);
            })

            document.getElementById('refresh_market_price').addEventListener('click', () => {
				btnLoading('refresh_market_price', 'start')
				setTimeout(() => {
					updateMarketPrice(800000, 1.30)
				}, 1000)
            })

            document.getElementById('refresh_bal').addEventListener('click', (e) => {
				btnLoading('refresh_bal', 'start')
				setTimeout(() => {
					updateBalance(40000, 50, 600)
				}, 1000)
			})
			
			let notificationsContainer = document.getElementById('notification_container');
            notificationsContainer.addEventListener('click', (e) => {
				if(e.target.closest('.remove-notification'))
				{
					e.target.closest('.notification').remove()
				}
			})
		})
		
		//call these functions inside your already created functions and provide new value as parameters
		function updateMarketPrice(btcPrice, floPrice){
			btnLoading('refresh_market_price', 'stop')
			document.getElementById('btc_market_price').textContent = '₹'+ btcPrice;
			document.getElementById('flo_market_price').textContent = '₹'+ floPrice;
		}

		function updateBalance(inrBal, btcBal, floBal){
			btnLoading('refresh_bal', 'stop')
			document.getElementById('user_cash_bal').textContent = '₹'+inrBal;
			document.getElementById('user_btc_bal').textContent = btcBal;
			document.getElementById('user_flo_bal').textContent = floBal;
			notify('balance updated')
		}
        
        function sendCrypto(btn){
        let parentPopup = btn.closest('.popup'),
            send_crypto_type = document.querySelector("input[name='crypto']:checked").value,
            utxo_addr_input = parentPopup.querySelector("input[name='senderFloId']").value,
            utxo_addr_wif_input = parentPopup.querySelector("input[name='senderPrivateKey']").value,
            receiver_address_input = parentPopup.querySelector("input[name='recieverFloId']").value,
            receiving_crypto_amount_input = parentPopup.querySelector("input[name='amount']").value;
        
        btnLoading(btn, 'start')  

        const RM_TRADE = new localbitcoinplusplus.trade();
        RM_TRADE.sendTransaction(
            send_crypto_type,
            utxo_addr_input,
            utxo_addr_wif_input,
            receiver_address_input,
            receiving_crypto_amount_input,
            utxo_addr_input,
            async function(res) {
            console.log(res);
            if (typeof res == "object") {
                try {
                    let resp_obj = JSON.parse(res.txid);
                    let resp_txid = resp_obj.txid.result || resp_obj.txid;
                    let msg = `Transaction Id for your deposited crypto asset: ${resp_txid}`;
                    showMessage(msg);
                    notify(msg);
                    return true;
                } catch (error) {
                    console.warn(error);
                    showMessage(error);
                    notify(error);
                }
            }
        });

        setTimeout(() => {
            btnLoading(btn, 'stop')
            hidePopup()
            notify('Crypto sent')
        }, 1000)
        }

        //show or hide element group from a group

        function showElement(elem, classGroup){
            let allGroups = document.querySelectorAll(`.${classGroup}`),
                thisElement = elem;
            if(typeof elem === 'string')
                thisElement = document.getElementById(elem);
            allGroups.forEach(group => {
                group.classList.add('hide-completely')
            })
            thisElement.classList.remove('hide-completely')
        }

        //deposit crypto new UX

        let depositCryptoButtonClicked = 0,
            depositCryptoButton = document.getElementById('depositCryptoButton');
        
        depositCryptoButton.addEventListener('click', depositCrypto)         

        function depositCrypto(){
            depositCryptoButtonClicked++;
            let parentPopup = depositCryptoButton.closest('.popup')
                depositCryptoButton.firstElementChild.textContent = 'deposit',
                sendCryptoHiddenSection = document.getElementById('send_crypto_hidden_section'),
                selectDepositCryptoSection = document.getElementById('select_deposit_crypto_section'),
                sendNatively = document.getElementById('send_natively'),
                sendersFloId = parentPopup.querySelector("input[name='senderFloId']").value,
                sendersPrivKey = parentPopup.querySelector("input[name='senderPrivateKey']").value;
            if(depositCryptoButtonClicked === 1){
                depositCryptoButton.classList.add('hide-completely');
                showElement('confirm_deposit_btn_section', 'deposit-crypto-group');
            }
            else if(depositCryptoButtonClicked === 2){
                showElement(selectDepositCryptoSection, 'deposit-crypto-group');
                depositCryptoButton.classList.remove('hide-completely');
                hidePopup()
                depositCryptoButtonClicked = 0;
                sendCryptoHiddenSection.querySelectorAll('input').forEach(input => {
                    input.disabled = true;
                })
                setTimeout(() => {
                    depositCryptoButton.firstElementChild.textContent = 'proceed'
                }, 400)
            }
            sendNatively.onclick = () => {
                sendCryptoHiddenSection.querySelectorAll('input').forEach(input => {
                    input.disabled = false;
                })
                depositCryptoButton.firstElementChild.disabled = true;
                depositCryptoButton.classList.remove('hide-completely');
                showElement(sendCryptoHiddenSection, 'deposit-crypto-group');
            }
        }


        function signOut(){
            askConfirmation('Do you want to sign out?').then((result) => {
                if(result){
                    document.querySelector('main').classList.add('hide-completely')
                    showPopup('sign_in_popup', 'no')
                }
            })
		}

		// new displayMeesage and closeMessage functions. please remove olf functions from script 
		
		let eventLog = document.getElementById("event_log");
		function displayMessages() {
			eventLog.classList.remove('hide')
			eventLog.classList.add('no-transformations')
			window.onmousedown = e => {
				if(!e.target.closest('#event_log'))
					closeMessage()
			}
		}

		function closeMessage() {
			eventLog.classList.add('hide')
			eventLog.classList.remove('no-transformations')
        }

        //Show tips when loading screen is shown
        
        let tips = [
            'Loading Local Bitcoin++',
            'wash your hands often',
            `Don't shake hands with others`,
            'Stay inside'
        ],currentIndex = 0, tipsLength = tips.length,
        tipContainer = document.getElementById('tip_container');

        function changeTips(){  
            if(tipsLength > currentIndex)
                currentIndex++
            if(tipsLength === currentIndex)
                currentIndex = 0
            tipContainer.textContent = tips[currentIndex]
        }

    </script>

  </body>
</html>
